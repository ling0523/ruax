!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Ruax={})}(this,(function(e){"use strict";var t=Object.defineProperty,o=(e,o,s)=>(((e,o,s)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s})(e,"symbol"!=typeof o?o+"":o,s),s);const s={matchingText(e,t){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let o=null;if("Chinese"==t&&(o=/^[\u4e00-\u9fa5]+$/),"chinese"==t&&(o=/[\u4e00-\u9fa5]/),"email"==t&&(o=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/),"username"==t&&(o=/^[a-zA-Z0-9_]{4,16}$/),"int+"==t&&(o=/^\d+$/),"int-"==t&&(o=/^-\d+$/),"int"==t&&(o=/^-?\d+$/),"pos"==t&&(o=/^\d*\.?\d+$/),"neg"==t&&(o=/^-\d*\.?\d+$/),"number"==t&&(o=/^-?\d*\.?\d+$/),"phone"==t&&(o=/^1[0-9]\d{9}$/),"idCard"==t&&(o=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/),"url"==t&&(o=/^(https?|ftp):\/\/(-\.)?([^\s\/?\.#-]+\.?)+(\/[^\s]*)?$/),"IPv4"==t&&(o=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/),"hex"==t&&(o=/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/),"rgb"==t&&(o=/^rgb\((25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d),\s?(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d),\s?(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\)$/),"rgba"==t&&(o=/^rgba\((25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d),\s?(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d),\s?(25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d),\s?(0?\.\d|1(\.0)?|0)\)$/),"QQ"==t&&(o=/^[1-9][0-9]{4,10}$/),"weixin"==t&&(o=/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/),"plate"==t&&(o=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/),!o)throw new Error("The second parameter is out of scope");return o.test(e)},getUrlParams(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a string");let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1);if(!o){let e=window.location.hash.split("?");2==e.length&&(o=e[1])}let s=o.match(t);return s?decodeURIComponent(s[2]):null},isEmptyObject(e){return!!this.isObject(e)&&0==Object.keys(e).length},equal(e,t){if(typeof e!=typeof t)return!1;if(this.isObject(e)&&this.isObject(t)){let o=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(t);if(o.length!=s.length)return!1;let n=o.length,r=!0;for(let a=0;a<n;a++){let s=o[a],n=e[s],i=t[s];if(!this.equal(n,i)){r=!1;break}}return r}return e===t},isObject:e=>!("object"!=typeof e||!e),copyText(e){if(!e||"string"!=typeof e)throw new TypeError("No text to copy is defined");if(!navigator.clipboard)throw new Error("navigator.clipboard must be obtained in a secure environment, such as localhost, 127.0.0.1, or https, so the method won't work");return navigator.clipboard.writeText(e)},clone(e){if(this.isObject(e)){if(Array.isArray(e))return e.map((e=>this.clone(e)));let t={};for(let o in e)t[o]=this.clone(e[o]);return t}return e}};class n{constructor(){o(this,"defaults"),this.defaults={baseUrl:"",url:"",data:{},type:"get",timeout:8e3,dataType:"json",jsonpCallback:"callback",headers:{},contentType:"application/x-www-form-urlencoded",processData:!0,cache:!0,async:!0,withCredentials:!1,beforeSend:null,complete:null,onProgress:null,cancelRequest:null,beforeRequest:null,beforeResponse:null}}__getValidatedConfig(e){let t=s.clone(this.defaults);return"object"==typeof e&&e&&("string"==typeof e.baseUrl&&(t.baseUrl=e.baseUrl),"string"==typeof e.url&&(t.url=e.url),"object"==typeof e.data&&e.data&&Object.assign(t.data,e.data),"string"==typeof e.type&&(t.type=e.type),"number"!=typeof e.timeout||isNaN(e.timeout)||(t.timeout=e.timeout),"string"==typeof e.dataType&&["STRING","XML","HTML","JSON","BLOB","JSONP"].includes(e.dataType.toLocaleUpperCase())&&(t.dataType=e.dataType),"string"==typeof e.jsonpCallback&&(t.jsonpCallback=e.jsonpCallback),"object"==typeof e.headers&&e.headers&&Object.assign(t.headers,e.headers),"string"!=typeof e.contentType&&!1!==e.contentType||(t.contentType=e.contentType),"boolean"==typeof e.processData&&(t.processData=e.processData),"boolean"==typeof e.cache&&(t.cache=e.cache),"boolean"==typeof e.async&&(t.async=e.async),"boolean"==typeof e.withCredentials&&(t.withCredentials=e.withCredentials),"function"==typeof e.beforeSend&&(t.beforeSend=e.beforeSend),"function"==typeof e.complete&&(t.complete=e.complete),"function"==typeof e.onProgress&&(t.onProgress=e.onProgress),"function"==typeof e.cancelRequest&&(t.cancelRequest=e.cancelRequest),"function"==typeof e.beforeRequest&&(t.beforeRequest=e.beforeRequest),"function"==typeof e.beforeResponse&&(t.beforeResponse=e.beforeResponse)),t}__getParams(e){let t=[];for(let o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}create(e){if("function"==typeof(e=this.__getValidatedConfig(e)).beforeRequest&&void 0===(e=e.beforeRequest.apply(this,[e])))throw new Error("The beforeRequest function must return config");return new Promise(((t,o)=>{if("jsonp"==e.dataType.toLocaleLowerCase()){"function"==typeof e.beforeSend&&e.beforeSend.apply(this);let s=("jsonp_"+Math.random()).replace(".",""),n=document.getElementsByTagName("head")[0];e.data[e.jsonpCallback]=s;let r=document.createElement("script");n.appendChild(r),window[s]=o=>{if("function"==typeof e.complete&&e.complete.apply(this),n.removeChild(r),clearTimeout(r.timer),window[s]=null,"function"==typeof e.beforeResponse){let s=e.beforeResponse.apply(this,[{response:o,config:e}]);t(s instanceof Promise?s:o)}else t(o)},(e.baseUrl+e.url).indexOf("?")>-1?r.src=e.baseUrl+e.url+"&"+this.__getParams(e.data):r.src=e.baseUrl+e.url+"?"+this.__getParams(e.data),r.timer=setTimeout((()=>{"function"==typeof e.complete&&e.complete.apply(this),window[s]=null,n.removeChild(r);const a=new Error("timeout of "+e.timeout+"ms exceeded");if("function"==typeof e.beforeResponse){let s=e.beforeResponse.apply(this,[{config:e,error:a}]);s instanceof Promise?t(s):o(a)}else o(a)}),e.timeout)}else{let s=new XMLHttpRequest;if("blob"==e.dataType.toLocaleLowerCase()&&(s.responseType="blob"),s.onreadystatechange=()=>{if(4==s.readyState){if("function"==typeof e.complete&&e.complete.apply(this,[s]),200==s.status){let r=null;if("json"==e.dataType.toLocaleLowerCase())try{r=JSON.parse(s.responseText)}catch(n){o(n)}else r="xml"==e.dataType.toLocaleLowerCase()?s.responseXML:"html"==e.dataType.toLocaleLowerCase()||"string"==e.dataType?s.responseText:"blob"==e.dataType.toLocaleLowerCase()?s.response:s.responseText;if("function"==typeof e.beforeResponse){let o=e.beforeResponse.apply(this,[{response:r,xhr:s,config:e}]);t(o instanceof Promise?o:r)}else t(r)}else if(0!=s.status){const n=new Error("Request failed with status code "+s.status);if("function"==typeof e.beforeResponse){let r=e.beforeResponse.apply(this,[{xhr:s,config:e,error:n}]);r instanceof Promise?t(r):o(n)}else o(n)}}else 1==s.readyState&&"function"==typeof e.beforeSend&&e.beforeSend.apply(this,[s])},s.ontimeout=()=>{const n=new Error("timeout of "+e.timeout+"ms exceeded");if("function"==typeof e.beforeResponse){let r=e.beforeResponse.apply(this,[{xhr:s,config:e,error:n}]);r instanceof Promise?t(r):o(n)}else o(n)},s.upload.onprogress=t=>{"function"==typeof e.onProgress&&e.onProgress.apply(this,[t])},"get"==e.type.toLocaleLowerCase()){this.__getParams(e.data)?s.open("GET",e.baseUrl+e.url+"?"+this.__getParams(e.data),e.async):s.open("GET",e.baseUrl+e.url,e.async),e.async&&(s.timeout=e.timeout);for(let t in e.headers)s.setRequestHeader(t,e.headers[t]);"string"==typeof e.contentType&&s.setRequestHeader("Content-Type",e.contentType),s.withCredentials=e.withCredentials,s.send(null)}else if("post"==e.type.toLocaleLowerCase()){s.open("POST",e.baseUrl+e.url,e.async),1==e.async&&(s.timeout=e.timeout);for(let t in e.headers)s.setRequestHeader(t,e.headers[t]);"string"==typeof e.contentType&&s.setRequestHeader("Content-Type",e.contentType),e.processData&&(e.data=this.__getParams(e.data)),s.withCredentials=e.withCredentials,s.send(e.data)}const n=function(){s.abort()};"function"==typeof e.cancelRequest&&e.cancelRequest.apply(this,[n])}}))}post(e,t){let o={url:e,data:t,type:"post"};return this.create(o)}get(e,t){let o={url:e,data:t,type:"get"};return this.create(o)}}e.Ruax=n,e.default=n,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
